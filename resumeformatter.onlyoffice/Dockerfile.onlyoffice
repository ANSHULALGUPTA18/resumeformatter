FROM onlyoffice/documentserver:latest

# Disable JWT and enable private IP addresses
ENV JWT_ENABLED=false
ENV JWT_SECRET=secret
ENV ALLOW_PRIVATE_IP_ADDRESS=true

# Copy custom configuration
COPY onlyoffice-config/local.json /etc/onlyoffice/documentserver/local.json

# Set permissions
RUN chown ds:ds /etc/onlyoffice/documentserver/local.json

# Expose port
EXPOSE 80

# Start OnlyOffice
CMD ["/app/ds/run-document-server.sh"]
